"use strict";(self.webpackChunkwhatsgemini=self.webpackChunkwhatsgemini||[]).push([[261],{261:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var a=r(43),n=r(3),l=r(951),s=r(315),i=r(204),o=r(579);const d=()=>{const e=(0,n.wA)(),t=(0,s.Zp)(),r=(0,a.useRef)(null),d=(0,n.d4)((e=>e.character.characters)),c=(0,n.d4)((e=>e.character.loading)),[p,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[u,g]=(0,a.useState)(""),[b,f]=(0,a.useState)(null);(0,a.useEffect)((()=>{e((0,l.vo)())}),[e]);const w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length>t?e.substring(0,t)+"...":e};return(0,o.jsxs)("div",{className:"w-full h-screen flex flex-col p-6 bg-app-light dark:bg-app-dark overflow-auto",children:[(0,o.jsxs)("button",{onClick:()=>{var e;const r=null===(e=window.history.state)||void 0===e?void 0:e.idx;"number"===typeof r&&r>0?t(-1):t("/",{replace:!0})},className:"mb-4 flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-full shadow-md hover:bg-primary-hover transition w-max",children:[(0,o.jsx)(i.QVr,{size:16}),(0,o.jsx)("span",{children:"Back"})]}),(0,o.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center text-primary dark:text-white",children:b?"Edit Character":"Create a Character"}),(0,o.jsxs)("div",{className:"w-full max-w-3xl mx-auto p-5 bg-panel-light dark:bg-panel-dark shadow-lg rounded-2xl",children:[(0,o.jsx)("input",{type:"text",placeholder:"Character Name",value:p,onChange:e=>h(e.target.value),className:"w-full p-3 bg-app-light dark:bg-app-dark text-black dark:text-white rounded-xl border border-transparent focus:border-primary outline-none mb-3"}),(0,o.jsx)("textarea",{placeholder:"Description (Optional)",value:m,onChange:e=>x(e.target.value),className:"w-full p-3 bg-app-light dark:bg-app-dark text-black dark:text-white rounded-xl border border-transparent focus:border-primary outline-none mb-3"}),(0,o.jsx)("textarea",{placeholder:"Character Prompt (Personality, Style, etc.)",value:u,onChange:e=>g(e.target.value),className:"w-full p-3 bg-app-light dark:bg-app-dark text-black dark:text-white rounded-xl border border-transparent focus:border-primary outline-none mb-3"}),(0,o.jsxs)("div",{className:"flex gap-3",children:[(0,o.jsx)("button",{onClick:b?()=>{p&&u?(e((0,l.t9)({id:b.id,name:p,description:m,prompt:u})),f(null),h(""),x(""),g("")):alert("Character name and prompt are required.")}:()=>{p&&u?(e((0,l.rq)({name:p,description:m,prompt:u})),h(""),x(""),g("")):alert("Character name and prompt are required.")},className:"flex-1 bg-primary text-white px-4 py-2 rounded-full shadow-md hover:bg-primary-hover transition",disabled:c,children:c?"Saving...":b?"Save Changes":"Create Character"}),!b&&(0,o.jsxs)("button",{onClick:()=>{r.current.click()},className:"bg-green-600 text-white px-4 py-2 rounded-full shadow-md hover:bg-green-700 transition flex items-center justify-center gap-2",title:"Import Character from JSON",children:[(0,o.jsx)(i.HVe,{size:16}),(0,o.jsx)("span",{className:"hidden sm:inline",children:"Import"})]}),b&&(0,o.jsx)("button",{onClick:()=>(f(null),h(""),x(""),void g("")),className:"bg-gray-400 text-white px-4 py-2 rounded-full shadow-md hover:bg-gray-500 transition",children:(0,o.jsx)(i.QCr,{size:16})})]}),(0,o.jsx)("input",{type:"file",ref:r,onChange:t=>{const r=t.target.files[0];if(!r)return;const a=new FileReader;a.onload=t=>{try{const r=t.target.result,a=JSON.parse(r);if(!a.name||!a.prompt)return void alert("Invalid character file: Missing name or prompt.");e((0,l.rq)({name:a.name,description:a.description||"",prompt:a.prompt})),alert("Character imported successfully!")}catch(r){console.error("Import error:",r),alert("Failed to import character. Invalid JSON file.")}},a.readAsText(r),t.target.value=null},accept:".json",style:{display:"none"}})]}),(0,o.jsx)("h3",{className:"text-xl font-bold mt-6 text-center text-primary dark:text-white",children:"Saved Characters"}),(0,o.jsx)("div",{className:"w-full max-w-3xl mx-auto mt-4 mb-20",children:c?(0,o.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"Loading..."}):0===d.length?(0,o.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:"No characters created yet."}):d.map((t=>(0,o.jsxs)("div",{className:"p-4 border border-gray-200 dark:border-gray-800 mb-3 rounded-xl flex justify-between items-center bg-panel-light dark:bg-panel-dark shadow-sm",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-semibold text-lg text-black dark:text-white",children:t.name}),(0,o.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 nowrap",children:w(t.description)})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>(e=>{const t={name:e.name,description:e.description,prompt:e.prompt},r=JSON.stringify(t,null,2),a=new Blob([r],{type:"application/json"}),n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download=`${e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_character.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n)})(t),className:"p-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition",title:"Export Character",children:(0,o.jsx)(i.WCW,{size:16})}),(0,o.jsx)("button",{onClick:()=>(e=>{f(e),h(e.name),x(e.description),g(e.prompt)})(t),className:"p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition",title:"Edit Character",children:(0,o.jsx)(i.uO9,{size:16})}),(0,o.jsx)("button",{onClick:()=>{return r=t.id,void(window.confirm("Are you sure you want to delete this character and their chats?")&&e((0,l.jL)(r)));var r},className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition",title:"Delete Character",children:(0,o.jsx)(i.qbC,{size:16})})]})]},t.id)))})]})}}}]);
//# sourceMappingURL=261.878b2e5f.chunk.js.map