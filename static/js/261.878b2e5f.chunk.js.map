{"version":3,"file":"static/js/261.878b2e5f.chunk.js","mappings":"6LAOA,MA6PA,EA7PsBA,KACpB,MAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MACXC,GAAeC,EAAAA,EAAAA,QAAO,MACtBC,GAAaC,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,UAAUH,aACpDI,GAAUH,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,UAAUC,WAEhDC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,KAC1BC,EAAaC,IAAkBF,EAAAA,EAAAA,UAAS,KACxCG,EAAQC,IAAaJ,EAAAA,EAAAA,UAAS,KAC9BK,EAAeC,IAAoBN,EAAAA,EAAAA,UAAS,OAEnDO,EAAAA,EAAAA,YAAU,KACRpB,GAASqB,EAAAA,EAAAA,MAAkB,GAC1B,CAACrB,IAEJ,MAsGMsB,EAAe,SAACC,GAA2B,IAArBC,EAASC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,IACtC,OAAOF,EAAKG,OAASF,EAAYD,EAAKK,UAAU,EAAGJ,GAAa,MAAQD,CAC1E,EAWA,OACEM,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gFAA+EC,SAAA,EAE5FF,EAAAA,EAAAA,MAAA,UACEG,QAbeC,KAAO,IAADC,EACzB,MAAMC,EAA0B,QAAvBD,EAAGE,OAAOC,QAAQ7B,aAAK,IAAA0B,OAAA,EAApBA,EAAsBC,IACf,kBAARA,GAAoBA,EAAM,EACnCjC,GAAU,GAEVA,EAAS,IAAK,CAAEoC,SAAS,GAC3B,EAQIR,UAAU,8HAA6HC,SAAA,EAEvIQ,EAAAA,EAAAA,KAACC,EAAAA,IAAW,CAACC,KAAM,MACnBF,EAAAA,EAAAA,KAAA,QAAAR,SAAM,aAGRQ,EAAAA,EAAAA,KAAA,MAAIT,UAAU,mEAAkEC,SAC7Eb,EAAgB,iBAAmB,wBAItCW,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uFAAsFC,SAAA,EACnGQ,EAAAA,EAAAA,KAAA,SACEG,KAAK,OACLC,YAAY,iBACZC,MAAOjC,EACPkC,SAAWC,GAAMlC,EAAQkC,EAAEC,OAAOH,OAClCd,UAAU,qJAEZS,EAAAA,EAAAA,KAAA,YACEI,YAAY,yBACZC,MAAO9B,EACP+B,SAAWC,GAAM/B,EAAe+B,EAAEC,OAAOH,OACzCd,UAAU,qJAEZS,EAAAA,EAAAA,KAAA,YACEI,YAAY,8CACZC,MAAO5B,EACP6B,SAAWC,GAAM7B,EAAU6B,EAAEC,OAAOH,OACpCd,UAAU,qJAEZD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBQ,EAAAA,EAAAA,KAAA,UACEP,QAASd,EAzHI8B,KAChBrC,GAASK,GAKdhB,GAASiD,EAAAA,EAAAA,IAAgB,CAAEC,GAAIhC,EAAcgC,GAAIvC,OAAMG,cAAaE,YACpEG,EAAiB,MACjBP,EAAQ,IACRG,EAAe,IACfE,EAAU,KARRkC,MAAM,0CAQK,EAnCeC,KACvBzC,GAASK,GAKdhB,GAASqD,EAAAA,EAAAA,IAAa,CAAE1C,OAAMG,cAAaE,YAC3CJ,EAAQ,IACRG,EAAe,IACfE,EAAU,KAPRkC,MAAM,0CAOK,EA0ILrB,UAAU,kGACVwB,SAAU5C,EAAQqB,SAEjBrB,EAAU,YAAcQ,EAAgB,eAAiB,sBAE1DA,IACAW,EAAAA,EAAAA,MAAA,UACEG,QAhGcuB,KACxBnD,EAAaoD,QAAQC,OAAO,EAgGlB3B,UAAU,gIACV4B,MAAM,6BAA4B3B,SAAA,EAElCQ,EAAAA,EAAAA,KAACoB,EAAAA,IAAQ,CAAClB,KAAM,MAChBF,EAAAA,EAAAA,KAAA,QAAMT,UAAU,mBAAkBC,SAAC,cAGtCb,IACCqB,EAAAA,EAAAA,KAAA,UACEP,QAASA,KA1KnBb,EAAiB,MACjBP,EAAQ,IACRG,EAAe,SACfE,EAAU,KAwKAa,UAAU,uFAAsFC,UAEhGQ,EAAAA,EAAAA,KAACqB,EAAAA,IAAO,CAACnB,KAAM,WAIrBF,EAAAA,EAAAA,KAAA,SACEG,KAAK,OACLmB,IAAKzD,EACLyC,SAhHkBiB,IACxB,MAAMC,EAAOD,EAAMf,OAAOiB,MAAM,GAChC,IAAKD,EAAM,OAEX,MAAME,EAAS,IAAIC,WACnBD,EAAOE,OAAUrB,IACf,IACE,MAAMsB,EAAUtB,EAAEC,OAAOsB,OACnBC,EAASC,KAAKC,MAAMJ,GAE1B,IAAKE,EAAO3D,OAAS2D,EAAOtD,OAE1B,YADAmC,MAAM,mDAIRnD,GACEqD,EAAAA,EAAAA,IAAa,CACX1C,KAAM2D,EAAO3D,KACbG,YAAawD,EAAOxD,aAAe,GACnCE,OAAQsD,EAAOtD,UAInBmC,MAAM,mCACR,CAAE,MAAOsB,GACPC,QAAQC,MAAM,gBAAiBF,GAC/BtB,MAAM,iDACR,GAEFc,EAAOW,WAAWb,GAClBD,EAAMf,OAAOH,MAAQ,IAAI,EAmFnBiC,OAAO,QACPC,MAAO,CAAEC,QAAS,cAKtBxC,EAAAA,EAAAA,KAAA,MAAIT,UAAU,kEAAiEC,SAAC,sBAGhFQ,EAAAA,EAAAA,KAAA,OAAKT,UAAU,sCAAqCC,SACjDrB,GACC6B,EAAAA,EAAAA,KAAA,KAAGT,UAAU,+CAA8CC,SAAC,eACpC,IAAtBzB,EAAWoB,QACba,EAAAA,EAAAA,KAAA,KAAGT,UAAU,+CAA8CC,SAAC,+BAE5DzB,EAAW0E,KAAKC,IACdpD,EAAAA,EAAAA,MAAA,OAEEC,UAAU,gJAA+IC,SAAA,EAEzJF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEQ,EAAAA,EAAAA,KAAA,MAAIT,UAAU,mDAAkDC,SAAEkD,EAAKtE,QACvE4B,EAAAA,EAAAA,KAAA,KAAGT,UAAU,kDAAiDC,SAAET,EAAa2D,EAAKnE,mBAEpFe,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBQ,EAAAA,EAAAA,KAAA,UACEP,QAASA,IAnKMiD,KAC7B,MAAMC,EAAe,CACnBvE,KAAMsE,EAAKtE,KACXG,YAAamE,EAAKnE,YAClBE,OAAQiE,EAAKjE,QAGTmE,EAAaZ,KAAKa,UAAUF,EAAc,KAAM,GAChDG,EAAO,IAAIC,KAAK,CAACH,GAAa,CAAEzC,KAAM,qBACtC6C,EAAMC,IAAIC,gBAAgBJ,GAE1BK,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAON,EACZG,EAAKI,SAAW,GAAGb,EAAKtE,KAAK2B,QAAQ,cAAe,KAAKyD,+BACzDJ,SAASK,KAAKC,YAAYP,GAC1BA,EAAKjC,QACLkC,SAASK,KAAKE,YAAYR,GAC1BF,IAAIW,gBAAgBZ,EAAI,EAkJKa,CAAsBnB,GACrCnD,UAAU,yEACV4B,MAAM,mBAAkB3B,UAExBQ,EAAAA,EAAAA,KAAC8D,EAAAA,IAAU,CAAC5D,KAAM,QAEpBF,EAAAA,EAAAA,KAAA,UACEP,QAASA,IA9LIiD,KAC3B9D,EAAiB8D,GACjBrE,EAAQqE,EAAKtE,MACbI,EAAekE,EAAKnE,aACpBG,EAAUgE,EAAKjE,OAAO,EA0LOsF,CAAoBrB,GACnCnD,UAAU,uEACV4B,MAAM,iBAAgB3B,UAEtBQ,EAAAA,EAAAA,KAACgE,EAAAA,IAAM,CAAC9D,KAAM,QAEhBF,EAAAA,EAAAA,KAAA,UACEP,QAASA,KAAMwE,OA3MAtD,EA2MsB+B,EAAK/B,QA1MpDd,OAAOqE,QAAQ,oEACjBzG,GAAS0G,EAAAA,EAAAA,IAAgBxD,KAFEA,KA2M+B,EAC9CpB,UAAU,qEACV4B,MAAM,mBAAkB3B,UAExBQ,EAAAA,EAAAA,KAACoE,EAAAA,IAAO,CAAClE,KAAM,YA3BdwC,EAAK/B,UAkCd,C","sources":["pages/CharacterPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { fetchCharacters, addCharacter, deleteCharacter, updateCharacter } from \"../features/characterSlice\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { FaArrowLeft, FaTrash, FaEdit, FaTimes, FaDownload, FaUpload } from \"react-icons/fa\";\r\n\r\n\r\nconst CharacterPage = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const fileInputRef = useRef(null);\r\n  const characters = useSelector((state) => state.character.characters);\r\n  const loading = useSelector((state) => state.character.loading);\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [prompt, setPrompt] = useState(\"\");\r\n  const [editCharacter, setEditCharacter] = useState(null); \r\n\r\n  useEffect(() => {\r\n    dispatch(fetchCharacters());\r\n  }, [dispatch]);\r\n\r\n  const handerSetEditCharacter = () => {\r\n    setEditCharacter(null);\r\n    setName(\"\");\r\n    setDescription(\"\");\r\n    setPrompt(\"\");\r\n  } \r\n\r\n  const handleCreateCharacter = () => {\r\n    if (!name || !prompt) {\r\n      alert(\"Character name and prompt are required.\");\r\n      return;\r\n    }\r\n\r\n    dispatch(addCharacter({ name, description, prompt }));\r\n    setName(\"\");\r\n    setDescription(\"\");\r\n    setPrompt(\"\");\r\n  };\r\n\r\n  const handleDeleteCharacter = (id) => {\r\n    if (window.confirm(\"Are you sure you want to delete this character and their chats?\")) {\r\n      dispatch(deleteCharacter(id));\r\n    }\r\n  };\r\n\r\n  const handleEditCharacter = (char) => {\r\n    setEditCharacter(char);\r\n    setName(char.name);\r\n    setDescription(char.description);\r\n    setPrompt(char.prompt);\r\n  };\r\n\r\n  const handleSaveEdit = () => {\r\n    if (!name || !prompt) {\r\n      alert(\"Character name and prompt are required.\");\r\n      return;\r\n    }\r\n\r\n    dispatch(updateCharacter({ id: editCharacter.id, name, description, prompt }));\r\n    setEditCharacter(null);\r\n    setName(\"\");\r\n    setDescription(\"\");\r\n    setPrompt(\"\");\r\n  };\r\n\r\n  const handleExportCharacter = (char) => {\r\n    const dataToExport = {\r\n      name: char.name,\r\n      description: char.description,\r\n      prompt: char.prompt,\r\n    };\r\n\r\n    const jsonString = JSON.stringify(dataToExport, null, 2);\r\n    const blob = new Blob([jsonString], { type: \"application/json\" });\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    const link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.download = `${char.name.replace(/[^a-z0-9]/gi, \"_\").toLowerCase()}_character.json`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const handleImportClick = () => {\r\n    fileInputRef.current.click();\r\n  };\r\n\r\n  const handleFileChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const content = e.target.result;\r\n        const parsed = JSON.parse(content);\r\n\r\n        if (!parsed.name || !parsed.prompt) {\r\n          alert(\"Invalid character file: Missing name or prompt.\");\r\n          return;\r\n        }\r\n\r\n        dispatch(\r\n          addCharacter({\r\n            name: parsed.name,\r\n            description: parsed.description || \"\",\r\n            prompt: parsed.prompt,\r\n          })\r\n        );\r\n\r\n        alert(\"Character imported successfully!\");\r\n      } catch (err) {\r\n        console.error(\"Import error:\", err);\r\n        alert(\"Failed to import character. Invalid JSON file.\");\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n    event.target.value = null; // Reset input\r\n  };\r\n\r\n  const truncateText = (text, maxLength = 100) => {\r\n    return text.length > maxLength ? text.substring(0, maxLength) + \"...\" : text;\r\n  };\r\n\r\n  const goBackOrHome = () => {\r\n    const idx = window.history.state?.idx;\r\n    if (typeof idx === 'number' && idx > 0) {\r\n      navigate(-1);\r\n    } else {\r\n      navigate('/', { replace: true });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-screen flex flex-col p-6 bg-app-light dark:bg-app-dark overflow-auto\">\r\n      {/* Back Button */}\r\n      <button\r\n        onClick={goBackOrHome}\r\n        className=\"mb-4 flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-full shadow-md hover:bg-primary-hover transition w-max\"\r\n      >\r\n        <FaArrowLeft size={16} />\r\n        <span>Back</span>\r\n      </button>\r\n\r\n      <h2 className=\"text-2xl font-bold mb-4 text-center text-primary dark:text-white\">\r\n        {editCharacter ? \"Edit Character\" : \"Create a Character\"}\r\n      </h2>\r\n\r\n      {/* Character Form */}\r\n      <div className=\"w-full max-w-3xl mx-auto p-5 bg-panel-light dark:bg-panel-dark shadow-lg rounded-2xl\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Character Name\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          className=\"w-full p-3 bg-app-light dark:bg-app-dark text-black dark:text-white rounded-xl border border-transparent focus:border-primary outline-none mb-3\"\r\n        />\r\n        <textarea\r\n          placeholder=\"Description (Optional)\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n          className=\"w-full p-3 bg-app-light dark:bg-app-dark text-black dark:text-white rounded-xl border border-transparent focus:border-primary outline-none mb-3\"\r\n        />\r\n        <textarea\r\n          placeholder=\"Character Prompt (Personality, Style, etc.)\"\r\n          value={prompt}\r\n          onChange={(e) => setPrompt(e.target.value)}\r\n          className=\"w-full p-3 bg-app-light dark:bg-app-dark text-black dark:text-white rounded-xl border border-transparent focus:border-primary outline-none mb-3\"\r\n        />\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={editCharacter ? handleSaveEdit : handleCreateCharacter}\r\n            className=\"flex-1 bg-primary text-white px-4 py-2 rounded-full shadow-md hover:bg-primary-hover transition\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Saving...\" : editCharacter ? \"Save Changes\" : \"Create Character\"}\r\n          </button>\r\n          {!editCharacter && (\r\n            <button\r\n              onClick={handleImportClick}\r\n              className=\"bg-green-600 text-white px-4 py-2 rounded-full shadow-md hover:bg-green-700 transition flex items-center justify-center gap-2\"\r\n              title=\"Import Character from JSON\"\r\n            >\r\n              <FaUpload size={16} />\r\n              <span className=\"hidden sm:inline\">Import</span>\r\n            </button>\r\n          )}\r\n          {editCharacter && (\r\n            <button\r\n              onClick={() => handerSetEditCharacter(null)}\r\n              className=\"bg-gray-400 text-white px-4 py-2 rounded-full shadow-md hover:bg-gray-500 transition\"\r\n            >\r\n              <FaTimes size={16} />\r\n            </button>\r\n          )}\r\n        </div>\r\n        <input\r\n          type=\"file\"\r\n          ref={fileInputRef}\r\n          onChange={handleFileChange}\r\n          accept=\".json\"\r\n          style={{ display: \"none\" }}\r\n        />\r\n      </div>\r\n\r\n      {/* Saved Characters */}\r\n      <h3 className=\"text-xl font-bold mt-6 text-center text-primary dark:text-white\">\r\n        Saved Characters\r\n      </h3>\r\n      <div className=\"w-full max-w-3xl mx-auto mt-4 mb-20\">\r\n        {loading ? (\r\n          <p className=\"text-gray-500 dark:text-gray-400 text-center\">Loading...</p>\r\n        ) : characters.length === 0 ? (\r\n          <p className=\"text-gray-500 dark:text-gray-400 text-center\">No characters created yet.</p>\r\n        ) : (\r\n          characters.map((char) => (\r\n            <div\r\n              key={char.id}\r\n              className=\"p-4 border border-gray-200 dark:border-gray-800 mb-3 rounded-xl flex justify-between items-center bg-panel-light dark:bg-panel-dark shadow-sm\"\r\n            >\r\n              <div>\r\n                <h4 className=\"font-semibold text-lg text-black dark:text-white\">{char.name}</h4>\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 nowrap\">{truncateText(char.description)}</p>\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <button\r\n                  onClick={() => handleExportCharacter(char)}\r\n                  className=\"p-2 bg-green-500 text-white rounded-full hover:bg-green-600 transition\"\r\n                  title=\"Export Character\"\r\n                >\r\n                  <FaDownload size={16} />\r\n                </button>\r\n                <button\r\n                  onClick={() => handleEditCharacter(char)}\r\n                  className=\"p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition\"\r\n                  title=\"Edit Character\"\r\n                >\r\n                  <FaEdit size={16} />\r\n                </button>\r\n                <button\r\n                  onClick={() => handleDeleteCharacter(char.id)}\r\n                  className=\"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition\"\r\n                  title=\"Delete Character\"\r\n                >\r\n                  <FaTrash size={16} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CharacterPage;\r\n"],"names":["CharacterPage","dispatch","useDispatch","navigate","useNavigate","fileInputRef","useRef","characters","useSelector","state","character","loading","name","setName","useState","description","setDescription","prompt","setPrompt","editCharacter","setEditCharacter","useEffect","fetchCharacters","truncateText","text","maxLength","arguments","length","undefined","substring","_jsxs","className","children","onClick","goBackOrHome","_window$history$state","idx","window","history","replace","_jsx","FaArrowLeft","size","type","placeholder","value","onChange","e","target","handleSaveEdit","updateCharacter","id","alert","handleCreateCharacter","addCharacter","disabled","handleImportClick","current","click","title","FaUpload","FaTimes","ref","event","file","files","reader","FileReader","onload","content","result","parsed","JSON","parse","err","console","error","readAsText","accept","style","display","map","char","dataToExport","jsonString","stringify","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","toLowerCase","body","appendChild","removeChild","revokeObjectURL","handleExportCharacter","FaDownload","handleEditCharacter","FaEdit","handleDeleteCharacter","confirm","deleteCharacter","FaTrash"],"sourceRoot":""}