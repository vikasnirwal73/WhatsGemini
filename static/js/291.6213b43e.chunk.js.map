{"version":3,"file":"static/js/291.6213b43e.chunk.js","mappings":"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","sources":["components/ChatWindow.jsx","components/MessageInput.jsx","pages/ChatPage.jsx"],"sourcesContent":["import React, { useRef, useEffect, useCallback, useMemo, useState } from \"react\";\r\nimport ReactMarkdown from 'react-markdown';\r\nimport remarkGfm from 'remark-gfm';\r\nimport { FaRedo, FaEdit, FaCheck, FaTimes, FaEllipsisV, FaCopy } from \"react-icons/fa\";\r\nimport { AI, YOU } from \"../utils/constants\";\r\n\r\n// Message Menu Component\r\nconst MessageMenu = ({ isOpen, onClose, children, isUserMessage }) => {\r\n  const menuRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n      return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n  }, [isOpen, onClose]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      ref={menuRef}\r\n      className={`absolute top-8 right-0 z-50 min-w-[140px] py-1 rounded-lg shadow-lg border\r\n        bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700`}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst MenuItem = ({ icon: Icon, label, onClick, disabled, danger }) => (\r\n  <button\r\n    onClick={onClick}\r\n    disabled={disabled}\r\n    className={`w-full flex items-center gap-3 px-4 py-2 text-sm transition\r\n      ${disabled ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100 dark:hover:bg-gray-700'}\r\n      ${danger ? 'text-red-500' : 'text-gray-700 dark:text-gray-200'}`}\r\n  >\r\n    <Icon size={14} />\r\n    <span>{label}</span>\r\n  </button>\r\n);\r\n\r\nconst ChatWindow = ({ messages = [], onRegenerate, onEdit, aiLoading }) => {\r\n  const chatEndRef = useRef(null);\r\n  const [typingDots, setTypingDots] = useState(\".\");\r\n  const [editingIndex, setEditingIndex] = useState(null);\r\n  const [editText, setEditText] = useState(\"\");\r\n  const [openMenuIndex, setOpenMenuIndex] = useState(null);\r\n  \r\n  // Determine the starting index for rendering messages\r\n  const startIndex = useMemo(() => {\r\n    // Find the index of the character initialization prompt\r\n    const charPromptIndex = messages.findIndex(\r\n      (m) =>\r\n        m.role === YOU &&\r\n        m.txt &&\r\n        m.txt.startsWith(\"Role play as, Character Name:\")\r\n    );\r\n\r\n    if (charPromptIndex !== -1) {\r\n      return charPromptIndex + 2;\r\n    }\r\n    \r\n    // Fallback: If no character prompt found, return 0 to show all messages\r\n    // This handles imported chats or chats without character context better than guessing\r\n    return 0;\r\n  }, [messages]);\r\n\r\n  const filteredMessages = useMemo(() => messages.slice(startIndex) || [], [messages, startIndex]);\r\n\r\n  // Clear editing state when messages change (prevents stale edit state)\r\n  useEffect(() => {\r\n    setEditingIndex(null);\r\n    setEditText(\"\");\r\n  }, [messages]);\r\n\r\n  // Scroll to the latest message\r\n  useEffect(() => {\r\n    chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages, aiLoading]);\r\n\r\n  useEffect(() => {\r\n    if (aiLoading) {\r\n      const interval = setInterval(() => {\r\n        setTypingDots((prev) => (prev.length < 3 ? prev + \".\" : \".\"));\r\n      }, 500);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [aiLoading]);\r\n\r\n  // Memoized function to handle regeneration\r\n  const handleRegenerate = useCallback(\r\n    (index) => {\r\n      if (onRegenerate) {\r\n        onRegenerate(index + startIndex);\r\n      }\r\n    },\r\n    [onRegenerate, startIndex]\r\n  );\r\n\r\n  // Start editing a message\r\n  const startEdit = useCallback((index, messageText) => {\r\n    setEditingIndex(index);\r\n    setEditText(messageText);\r\n  }, []);\r\n\r\n  // Cancel editing\r\n  const cancelEdit = useCallback(() => {\r\n    setEditingIndex(null);\r\n    setEditText(\"\");\r\n  }, []);\r\n\r\n  // Save edited message\r\n  const saveEdit = useCallback(() => {\r\n    if (editText.trim() && onEdit) {\r\n      onEdit(editingIndex + startIndex, editText.trim());\r\n      setEditingIndex(null);\r\n      setEditText(\"\");\r\n    }\r\n  }, [editText, editingIndex, onEdit, startIndex]);\r\n\r\n  // Toggle menu\r\n  const toggleMenu = useCallback((index) => {\r\n    setOpenMenuIndex(openMenuIndex === index ? null : index);\r\n  }, [openMenuIndex]);\r\n\r\n  // Close menu\r\n  const closeMenu = useCallback(() => {\r\n    setOpenMenuIndex(null);\r\n  }, []);\r\n\r\n  // Copy message to clipboard\r\n  const copyMessage = useCallback((text) => {\r\n    navigator.clipboard.writeText(text);\r\n    closeMenu();\r\n  }, [closeMenu]);\r\n\r\n  return (\r\n    <div className=\"flex-1 p-4 overflow-auto bg-app-light dark:bg-app-dark relative z-1 h-full max-w-full\">\r\n      {filteredMessages.length === 0 ? (\r\n        <p className=\"text-gray-500 dark:text-gray-400 text-center\">No messages yet.</p>\r\n      ) : (\r\n        filteredMessages.map((msg, i) => (\r\n          <div key={i} className={`flex ${msg.role === YOU ? \"justify-end\" : \"justify-start\"} mb-4`}>\r\n            <div\r\n              className={`relative p-2.5 pr-6 text-base rounded shadow-md ${\r\n                msg.role === YOU && editingIndex === i\r\n                  ? \"w-full bg-bubble-sent-light dark:bg-bubble-sent-dark text-white\"\r\n                  : msg.role === YOU\r\n                  ? \"max-w-[90%] md:max-w-[75%] bg-bubble-sent-light dark:bg-bubble-sent-dark text-white\"\r\n                  : \"max-w-[90%] md:max-w-[75%] pr-8 bg-bubble-received-light dark:bg-bubble-received-dark text-gray-900 dark:text-white\"\r\n              }`}\r\n            >\r\n              {/* Editable mode for user messages */}\r\n              {msg.role === YOU && editingIndex === i ? (\r\n                <div className=\"flex flex-col gap-2\">\r\n                  <textarea\r\n                    ref={(el) => el && el.focus()}\r\n                    value={editText}\r\n                    onChange={(e) => setEditText(e.target.value)}\r\n                    className=\"w-full min-h-[80px] p-2 bg-white/10 text-white rounded border border-white/30 focus:border-white/60 outline-none resize-y\"\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === \"Enter\" && !e.shiftKey) {\r\n                        e.preventDefault();\r\n                        saveEdit();\r\n                      }\r\n                      if (e.key === \"Escape\") {\r\n                        cancelEdit();\r\n                      }\r\n                    }}\r\n                  />\r\n                  <div className=\"flex justify-end gap-2\">\r\n                    <button\r\n                      onClick={cancelEdit}\r\n                      className=\"p-1.5 rounded bg-white/10 hover:bg-white/20 text-white/80 hover:text-white transition\"\r\n                      title=\"Cancel (Esc)\"\r\n                    >\r\n                      <FaTimes size={12} />\r\n                    </button>\r\n                    <button\r\n                      onClick={saveEdit}\r\n                      className=\"p-1.5 rounded bg-white/20 hover:bg-white/30 text-white transition\"\r\n                      title=\"Save (Enter)\"\r\n                    >\r\n                      <FaCheck size={12} />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                /* Normal message display */\r\n                <>\r\n                  <div className=\"markdown-content text-left break-words\">\r\n                    <ReactMarkdown \r\n                      remarkPlugins={[remarkGfm]}\r\n                      components={{\r\n                        p: ({node, ...props}) => <p className=\"mb-2 last:mb-0\" {...props} />,\r\n                        em: ({node, ...props}) => <em className={`italic ${msg.role === YOU ? 'text-white/80' : 'text-gray-500 dark:text-gray-400'}`} {...props} />,\r\n                        a: ({node, ...props}) => <a className={`${msg.role === YOU ? 'text-white underline' : 'text-blue-500 hover:underline'}`} target=\"_blank\" rel=\"noopener noreferrer\" {...props} aria-hidden=\"true\" />,\r\n                        ul: ({node, ...props}) => <ul className=\"list-disc ml-5 mb-2\" {...props} />,\r\n                        ol: ({node, ...props}) => <ol className=\"list-decimal ml-5 mb-2\" {...props} />,\r\n                        li: ({node, ...props}) => <li className=\"mb-1\" {...props} />,\r\n                        code: ({node, inline, className, children, ...props}) => {\r\n                          return inline ? (\r\n                            <code className=\"bg-black/10 dark:bg-white/10 rounded px-1 py-0.5 text-sm\" {...props}>\r\n                              {children}\r\n                            </code>\r\n                          ) : (\r\n                            <pre className=\"bg-black/10 dark:bg-white/10 p-3 rounded-md overflow-x-auto my-2 text-sm\">\r\n                              <code className={className} {...props}>\r\n                                {children}\r\n                              </code>\r\n                            </pre>\r\n                          );\r\n                        },\r\n                        blockquote: ({node, ...props}) => <blockquote className={`border-l-4 ${msg.role === YOU ? 'border-white/50' : 'border-gray-300'} pl-4 py-1 my-2 italic`} {...props} />,\r\n                        table: ({node, ...props}) => <div className=\"overflow-x-auto my-2\"><table className={`min-w-full divide-y ${msg.role === YOU ? 'divide-white/20 border-white/20' : 'divide-gray-200 dark:divide-gray-700 border-gray-200 dark:border-gray-700'} border`} {...props} /></div>,\r\n                        th: ({node, ...props}) => <th className={`px-3 py-2 text-left text-xs font-medium uppercase tracking-wider border-b ${msg.role === YOU ? 'bg-white/10 border-white/20 text-white' : 'bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700 text-gray-500 dark:text-gray-300'}`} {...props} />,\r\n                        td: ({node, ...props}) => <td className={`px-3 py-2 whitespace-nowrap text-sm border-b ${msg.role === YOU ? 'border-white/20 text-white' : 'border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300'}`} {...props} />,\r\n                      }}\r\n                    >\r\n                      {msg.txt}\r\n                    </ReactMarkdown>\r\n                  </div>\r\n                  {/* Three-dot menu */}\r\n                  <div className=\"absolute top-1 right-1\">\r\n                    <button\r\n                      onClick={() => toggleMenu(i)}\r\n                      className={`p-1.5 rounded-full transition ${\r\n                        msg.role === YOU \r\n                          ? 'text-white/60 hover:text-white hover:bg-white/10' \r\n                          : 'text-gray-400 hover:text-gray-600 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700'\r\n                      }`}\r\n                      title=\"More options\"\r\n                      aria-label=\"Message options\"\r\n                    >\r\n                      <FaEllipsisV size={12} />\r\n                    </button>\r\n                    <MessageMenu \r\n                      isOpen={openMenuIndex === i} \r\n                      onClose={closeMenu}\r\n                      isUserMessage={msg.role === YOU}\r\n                    >\r\n                      <MenuItem \r\n                        icon={FaCopy} \r\n                        label=\"Copy\" \r\n                        onClick={() => copyMessage(msg.txt)} \r\n                      />\r\n                      {msg.role === AI && (\r\n                        <MenuItem \r\n                          icon={FaRedo} \r\n                          label=\"Regenerate\" \r\n                          onClick={() => { handleRegenerate(i); closeMenu(); }}\r\n                          disabled={aiLoading}\r\n                        />\r\n                      )}\r\n                      {msg.role === YOU && (\r\n                        <MenuItem \r\n                          icon={FaEdit} \r\n                          label=\"Edit\" \r\n                          onClick={() => { startEdit(i, msg.txt); closeMenu(); }}\r\n                          disabled={aiLoading}\r\n                        />\r\n                      )}\r\n                    </MessageMenu>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))\r\n      )}\r\n      {aiLoading && (\r\n        <div className=\"flex justify-start\">\r\n          <div className=\"text-sm text-gray dark:text-white italic\">typing{typingDots}</div>\r\n        </div>\r\n      )}\r\n      <div ref={chatEndRef} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatWindow;\r\n","import React, { useState, useCallback, useRef } from \"react\";\r\nimport { FaPaperPlane } from \"react-icons/fa\";\r\n\r\nconst MessageInput = ({ onSend, disabled = false }) => {\r\n  const [text, setText] = useState(\"\");\r\n  const inputRef = useRef(null);\r\n\r\n  // Memoized function to handle message sending\r\n  const handleSend = useCallback(() => {\r\n    if (disabled) return;\r\n    const trimmedText = text.trim();\r\n    if (!trimmedText) return;\r\n\r\n    onSend(trimmedText);\r\n    setText(\"\");\r\n  }, [text, onSend, disabled]);\r\n\r\n  // Scroll input into view when focused (helps with mobile keyboards)\r\n  const handleFocus = useCallback(() => {\r\n    setTimeout(() => {\r\n      inputRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n    }, 300);\r\n  }, []);\r\n\r\n  const canSend = text.trim() && !disabled;\r\n\r\n  return (\r\n    <div className=\"p-3 pb-safe flex items-center bg-panel-light dark:bg-panel-dark border-t border-gray-200 dark:border-gray-800 flex-shrink-0\">\r\n      <input\r\n        ref={inputRef}\r\n        value={text}\r\n        onChange={(e) => setText(e.target.value)}\r\n        placeholder={disabled ? \"Waiting for response...\" : \"Type a message...\"}\r\n        className=\"flex-1 mr-3 px-4 py-3 bg-app-light dark:bg-app-dark text-black dark:text-white rounded-full border border-transparent focus:border-primary outline-none text-base transition-colors disabled:opacity-50\"\r\n        disabled={disabled}\r\n        onFocus={handleFocus}\r\n        onKeyDown={(e) => {\r\n          if (e.key === \"Enter\" && !e.shiftKey) {\r\n            e.preventDefault();\r\n            handleSend();\r\n          }\r\n        }}\r\n        aria-label=\"Message input\"\r\n        aria-busy={disabled}\r\n      />\r\n\r\n      <button\r\n        onClick={handleSend}\r\n        className={`p-3 rounded-full transition shadow-md ${\r\n          canSend\r\n            ? \"bg-primary hover:bg-primary-hover text-white transform hover:scale-105\"\r\n            : \"bg-gray-200 dark:bg-gray-800 text-gray-400 cursor-not-allowed\"\r\n        }`}\r\n        disabled={!canSend}\r\n        title=\"Send Message\"\r\n        aria-label=\"Send Message\"\r\n      >\r\n        <FaPaperPlane size={16} className={canSend ? \"ml-0.5\" : \"\"} />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageInput;\r\n","import React, { useEffect, useState, useMemo } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { fetchChatById, fetchChats, addMessage, updateMessages } from \"../features/chatSlice\";\r\nimport { fetchCharacterById } from \"../features/characterSlice\";\r\nimport { generateAIResponse } from \"../features/aiSlice\";\r\nimport ChatWindow from \"../components/ChatWindow\";\r\nimport MessageInput from \"../components/MessageInput\";\r\nimport { FaArrowLeft, FaUser, FaDownload } from \"react-icons/fa\";\r\nimport { AI, MODEL, USER, YOU } from \"../utils/constants\";\r\n\r\nconst ChatPage = () => {\r\n  const { chatId } = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const chats = useSelector((state) => state.chat.chats);\r\n  const aiLoading = useSelector((state) => state.ai.loading);\r\n  \r\n  const [messages, setMessages] = useState([]);\r\n  const [character, setCharacter] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n\r\n  // Memoize chatIdNum to avoid redundant conversions\r\n  const chatIdNum = useMemo(() => (chatId ? Number(chatId) : null), [chatId]);\r\n\r\n  useEffect(() => {\r\n    if (!chatIdNum) return;\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        await dispatch(fetchChatById(chatIdNum)).unwrap();\r\n        await dispatch(fetchChats()).unwrap();\r\n      } catch (err) {\r\n        console.error(\"Error fetching chat data:\", err);\r\n        setError(\"Failed to load chat. Please try again.\");\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [dispatch, chatIdNum]);\r\n\r\n  useEffect(() => {\r\n    if (chatIdNum && chats?.length) {\r\n      const currentChat = chats.find((chat) => chat.id === chatIdNum);\r\n      if (currentChat) {\r\n        setMessages(currentChat.content);\r\n        setCharacter(currentChat.title);\r\n      }\r\n    }\r\n  }, [chatIdNum, chats]);\r\n\r\n  useEffect(() => {\r\n    if (messages.length > 0 && messages[0]?.characterId) {\r\n      dispatch(fetchCharacterById(messages[0].characterId));\r\n    }\r\n  }, [dispatch, messages]);\r\n\r\n  const createChatHistory = (msgs) =>\r\n    msgs.map((msg) => ({\r\n      role: msg.role === YOU ? USER : MODEL,\r\n      parts: [{ text: msg.txt }],\r\n    }));\r\n\r\n  const handleSend = async (text) => {\r\n    if (!text.trim() || !chatIdNum) return;\r\n\r\n    setError(null);\r\n\r\n    try {\r\n      const resultAction = await dispatch(addMessage({ chatId: chatIdNum, role: YOU, text }));\r\n      const updatedMessages = resultAction.payload || [];\r\n\r\n      const chatHistory = createChatHistory(updatedMessages);\r\n      const aiResponse = await dispatch(generateAIResponse({ prompt: text, history: chatHistory }));\r\n\r\n      if (aiResponse.payload) {\r\n        await dispatch(addMessage({ chatId: chatIdNum, role: AI, text: aiResponse.payload }));\r\n      }\r\n\r\n      dispatch(fetchChats());\r\n    } catch (err) {\r\n      console.error(\"Error sending message:\", err);\r\n      setError(\"Failed to send message. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleEditMessage = async (index, newText) => {\r\n    if (!newText.trim() || !chatIdNum) return;\r\n\r\n    setError(null);\r\n\r\n    try {\r\n      // Truncate messages up to (but not including) the edited message\r\n      const truncatedMessages = messages.slice(0, index);\r\n      await dispatch(updateMessages({ chatId: chatIdNum, newMessages: truncatedMessages }));\r\n\r\n      // Add the edited message\r\n      const resultAction = await dispatch(addMessage({ chatId: chatIdNum, role: YOU, text: newText }));\r\n      const updatedMessages = resultAction.payload || [];\r\n\r\n      // Generate new AI response\r\n      const chatHistory = createChatHistory(updatedMessages);\r\n      const aiResponse = await dispatch(generateAIResponse({ prompt: newText, history: chatHistory }));\r\n\r\n      if (aiResponse.payload) {\r\n        await dispatch(addMessage({ chatId: chatIdNum, role: AI, text: aiResponse.payload }));\r\n      }\r\n\r\n      dispatch(fetchChats());\r\n    } catch (err) {\r\n      console.error(\"Error editing message:\", err);\r\n      setError(\"Failed to edit message. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleRegenerate = async (index) => {\r\n    if (index < 0 || index >= messages.length || !chatIdNum) return;\r\n\r\n    setError(null);\r\n\r\n    try {\r\n      const updatedMessages = messages.slice(0, index);\r\n      await dispatch(updateMessages({ chatId: chatIdNum, newMessages: updatedMessages }));\r\n\r\n      if (!updatedMessages.length || updatedMessages[updatedMessages.length - 1].role !== YOU) {\r\n        console.warn(\"Cannot regenerate without a user message.\");\r\n        return;\r\n      }\r\n\r\n      const lastUserMessage = updatedMessages[updatedMessages.length - 1].txt;\r\n      const chatHistory = createChatHistory(updatedMessages);\r\n      const aiResponse = await dispatch(generateAIResponse({ prompt: lastUserMessage, history: chatHistory }));\r\n\r\n      if (aiResponse.payload) {\r\n        await dispatch(addMessage({ chatId: chatIdNum, role: AI, text: aiResponse.payload }));\r\n      }\r\n\r\n      dispatch(fetchChats());\r\n    } catch (err) {\r\n      console.error(\"Error regenerating response:\", err);\r\n      setError(\"Failed to regenerate response. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const handleExport = () => {\r\n    if (!chatIdNum || !chats) return;\r\n    const currentChat = chats.find((c) => c.id === chatIdNum);\r\n    if (!currentChat) return;\r\n    \r\n    const { id, ...exportData } = currentChat;\r\n    \r\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: \"application/json\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `chat_${currentChat.title || \"export\"}_${Date.now()}.json`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const goBackOrHome = () => {\r\n    const idx = window.history.state?.idx;\r\n    if (typeof idx === 'number' && idx > 0) {\r\n      navigate(-1);\r\n    } else {\r\n      navigate('/', { replace: true });\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"flex flex-col w-full h-dvh-minus-header chat-container bg-app-light dark:bg-app-dark\">\r\n      {/* Chat Header */}\r\n      <ChatHeader character={character} onBack={goBackOrHome} onExport={handleExport} />\r\n\r\n      {/* Error Message */}\r\n      {error && <p className=\"text-red-500 text-center p-2\">{error}</p>}\r\n\r\n      {/* Chat Messages */}\r\n      <div className=\"flex-1 overflow-auto\">\r\n        <ChatWindow messages={messages} onRegenerate={handleRegenerate} onEdit={handleEditMessage} aiLoading={aiLoading} />\r\n      </div>\r\n\r\n      {/* Message Input */}\r\n      <MessageInput onSend={handleSend} disabled={aiLoading} />\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst ChatHeader = ({ character, onBack, onExport }) => (\r\n  <div className=\"flex items-center justify-between p-3 bg-panel-light dark:bg-panel-dark text-black dark:text-white border-b border-gray-200 dark:border-gray-800 shadow-sm z-10\">\r\n    <div className=\"flex items-center\">\r\n      <button\r\n        onClick={onBack}\r\n        className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-600 dark:text-gray-300\"\r\n        title=\"Back\"\r\n      >\r\n        <FaArrowLeft size={18} />\r\n      </button>\r\n      <div className=\"flex items-center gap-3 ml-3\">\r\n        <FaUser size={28} className=\"text-white\" />\r\n        <h2 className=\"text-lg font-semibold\">{character || \"Chat\"}</h2>\r\n      </div>\r\n    </div>\r\n    <button\r\n      onClick={onExport}\r\n      className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition text-gray-600 dark:text-gray-300\"\r\n      title=\"Export Chat\"\r\n    >\r\n      <FaDownload size={18} />\r\n    </button>\r\n  </div>\r\n);\r\n\r\nexport default ChatPage;\r\n"],"names":["MessageMenu","_ref","isOpen","onClose","children","isUserMessage","menuRef","useRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","_jsx","ref","className","MenuItem","_ref2","icon","Icon","label","onClick","disabled","danger","_jsxs","size","_ref3","messages","onRegenerate","onEdit","aiLoading","chatEndRef","typingDots","setTypingDots","useState","editingIndex","setEditingIndex","editText","setEditText","openMenuIndex","setOpenMenuIndex","startIndex","useMemo","charPromptIndex","findIndex","m","role","YOU","txt","startsWith","filteredMessages","slice","_chatEndRef$current","scrollIntoView","behavior","interval","setInterval","prev","length","clearInterval","handleRegenerate","useCallback","index","startEdit","messageText","cancelEdit","saveEdit","trim","toggleMenu","closeMenu","copyMessage","text","navigator","clipboard","writeText","map","msg","i","el","focus","value","onChange","e","onKeyDown","key","shiftKey","preventDefault","title","FaTimes","FaCheck","_Fragment","ReactMarkdown","remarkPlugins","remarkGfm","components","p","_ref4","node","props","em","_ref5","a","_ref6","rel","ul","_ref7","ol","_ref8","li","_ref9","code","_ref10","inline","blockquote","_ref11","table","_ref12","th","_ref13","td","_ref14","FaEllipsisV","FaCopy","AI","FaRedo","FaEdit","onSend","setText","inputRef","handleSend","trimmedText","handleFocus","setTimeout","_inputRef$current","block","canSend","placeholder","onFocus","FaPaperPlane","ChatHeader","character","onBack","onExport","FaArrowLeft","FaUser","FaDownload","ChatPage","chatId","useParams","navigate","useNavigate","dispatch","useDispatch","chats","useSelector","state","chat","ai","loading","setMessages","setCharacter","error","setError","chatIdNum","Number","async","fetchChatById","unwrap","fetchChats","err","console","fetchData","currentChat","find","id","content","_messages$","characterId","fetchCharacterById","createChatHistory","msgs","USER","MODEL","parts","goBackOrHome","_window$history$state","idx","window","history","replace","handleExport","c","exportData","blob","Blob","JSON","stringify","type","url","URL","createObjectURL","createElement","href","download","Date","now","body","appendChild","click","removeChild","revokeObjectURL","ChatWindow","updatedMessages","updateMessages","newMessages","warn","lastUserMessage","chatHistory","aiResponse","generateAIResponse","prompt","payload","addMessage","newText","truncatedMessages","MessageInput"],"sourceRoot":""}